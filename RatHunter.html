<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Rat Hunter</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="modernizr.js"></script>

    <script>
      var mainTilesheet = new Image();
      mainTilesheet.src = "imgs/tilesheet.png";

      var firefoxTilesheet = new Image();
      firefoxTilesheet.src = "imgs/firefox.png";

      var map;
      var firefox;
      var allElements;

      function canvasSupport() {
        return Modernizr.canvas;
      }

      function mainDraw() {
        requestAnimationFrame(mainDraw);
          allElements.forEach(function(element) {
          element.draw()
        });
      }

      function init() {

        if (!canvasSupport()) {
          document.write("Your Browser doesn't support Canvas, please download the latest Mozilla Firefox Browser");
        } else {
          var canvas = document.getElementById("canvas");
          ctx = canvas.getContext("2d");
          requestAnimationFrame(mainDraw);

          map = {
            draw: function() {

              var indexOffset = -1;
              var mapRows = 20;
              var mapCols = 25;

              var tileMap = [
                            [389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,389,389,358,389,389,389,389,953,954,389,389,389,389,389,389,389]
                          , [389,389,358,389,389,389,389,389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,358,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,358,389]
                          , [389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389]
                          , [389,389,389,389,508,509,510,389,389,953,954,954,954,954,954,954,954,954,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,539,540,389,389,953,954,984,984,984,984,984,984,984,389,389,358,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,358,389,389,389,953,954,389,389,389,358,389,389,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,358,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,565,566,567,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,358,389,389,389,389,389,389,389,389,595,596,597,389,389]
                          , [389,565,566,567,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,625,626,627,389,389]
                          , [389,595,596,597,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                          , [389,625,626,627,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,358,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,358,953,954,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,983,984,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                            ];

              for (var rowCtr=0; rowCtr < mapRows; rowCtr++) {
                for (var colCtr=0; colCtr < mapCols; colCtr++) {

                  var tileId = tileMap [rowCtr][colCtr] + indexOffset;
                  var sourceX = Math.floor(tileId % 30) *32;
                  var sourceY = Math.floor(tileId / 30) *32;
                  ctx.drawImage(mainTilesheet, sourceX, sourceY, 32, 32, colCtr * 32, rowCtr * 32, 32, 32);
                }
              }
            }
          }

          firefox = {
            movingUpdraw: function() {

            }
          };

          entireElements = [
            map
          ];
        }
      };
    </script>
  </head>

    <body onload="init();">

      <div id="title" align="center">
        Rat Hunter
      </div>

      <div id="centerCanvas">
        <canvas id="canvas" width="800" height="640"></canvas>
      </div>
    </body>
</html>
