<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Rat Hunter</title>
    <meta charset="UTF-8" />
    <style>
      canvas {
        border: 2px solid black;
      }

      #centerCanvas {
        width: 800px;
        margin-left: auto;
        margin-right: auto;
      }

      #title {
        font-size: 25px;
        font-weight: bold;
        font-style: italic;
        font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
        width: 800px;
        margin-left: auto;
        margin-right: auto;
      }
    </style>
    <script>
      var tilesheet = new Image();
      tilesheet.src = "imgs/tilesheet.png";

      var map;
      var entireElements;

      function mainDraw () {
        requestAnimationFrame(mainDraw);
          entireElements.forEach(function(element) {
          element.draw()
        });
      }

      function init() {
        var canvas = document.getElementById("canvas");

        if (canvas.getContext) {
          ctx = canvas.getContext("2d");
          requestAnimationFrame(mainDraw);

          map = {
            draw: function () {

              var indexOffset = -1;
              var mapRows = 20;
              var mapCols = 25;

              var tileMap = [
                            [389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,389,389,358,389,389,389,389,953,954,389,389,389,389,389,389,389]
                          , [389,389,358,389,389,389,389,389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,358,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,358,389]
                          , [389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389]
                          , [389,389,389,389,508,509,510,389,389,953,954,954,954,954,954,954,954,954,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,539,540,389,389,953,954,984,984,984,984,984,984,984,389,389,358,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,358,389,389,389,953,954,389,389,389,358,389,389,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,358,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,565,566,567,389,389]
                          , [389,389,389,389,389,389,389,389,389,953,954,358,389,389,389,389,389,389,389,389,595,596,597,389,389]
                          , [389,565,566,567,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,625,626,627,389,389]
                          , [389,595,596,597,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                          , [389,625,626,627,389,389,389,389,389,953,954,389,389,389,389,389,389,389,389,389,358,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,358,953,954,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                          , [389,389,389,389,389,389,389,389,389,983,984,389,389,389,389,389,389,389,389,389,389,389,389,389,389]
                            ];

              for (var rowCtr=0; rowCtr < mapRows; rowCtr++) {
                for (var colCtr=0; colCtr < mapCols; colCtr++) {

                  var tileId = tileMap [rowCtr][colCtr] + indexOffset;
                  var sourceX = Math.floor(tileId % 30) *32;
                  var sourceY = Math.floor(tileId / 30) *32;
                  ctx.drawImage(tilesheet, sourceX, sourceY, 32, 32, colCtr * 32, rowCtr * 32, 32, 32);
                }
              }
            }
          }

          entireElements = [
            map
          ];
        }
      };
    </script>
  </head>

    <body onload="init();">

      <div id="title" align="center">
        Rat Hunter
      </div>

      <div id="centerCanvas">
        <canvas id="canvas" width="800" height="640"></canvas>
      </div>
    </body>
</html>
